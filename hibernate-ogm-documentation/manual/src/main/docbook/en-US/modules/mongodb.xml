<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Hibernate, Relational Persistence for Idiomatic Java
  ~
  ~ JBoss, Home of Professional Open Source
  ~ Copyright 2012 Red Hat Inc. and/or its affiliates and other contributors
  ~ as indicated by the @authors tag. All rights reserved.
  ~ See the copyright.txt in the distribution for a
  ~ full listing of individual contributors.
  ~
  ~ This copyrighted material is made available to anyone wishing to use,
  ~ modify, copy, or redistribute it subject to the terms and conditions
  ~ of the GNU Lesser General Public License, v. 2.1.
  ~ This program is distributed in the hope that it will be useful, but WITHOUT A
  ~ WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
  ~ PARTICULAR PURPOSE.  See the GNU Lesser General Public License for more details.
  ~ You should have received a copy of the GNU Lesser General Public License,
  ~ v.2.1 along with this distribution; if not, write to the Free Software
  ~ Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
  ~ MA  02110-1301, USA.
  -->
<!--
    @author Guillaume Scheibel <guillaume.scheibel@gmail.com>
-->
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "../ogm.ent">
%BOOK_ENTITIES;
]>
<section>
    <title>MongoBD</title>

    <section>
        <title>Configuring MongoDB</title>

        <para>To use Hibernate OGM with MongoDB there are the properties to
            configure:</para>

        <itemizedlist>
            <listitem>
                <para><literal>hibernate.ogm.datastore.provider</literal> to set to
                    <literal>mongodb</literal></para>
            </listitem>

            <listitem>
                <para><literal>hibernate.ogm.mongodb.host</literal> which is the
                    hostname of the mongodb instance. The default value is
                    <literal>127.0.0.1</literal></para>
            </listitem>

            <listitem>
                <para><literal>hibernate.ogm.mongodb.port</literal> which is the port
                    used by the mongodb instance. The default value is
                    <literal>27017</literal></para>
            </listitem>

            <listitem>
                <para><literal>hibernate.ogm.mongodb.database</literal> which is the
                    database to connect to. There is no default value.</para>
            </listitem>

            <listitem>
                <para><literal>hibernate.ogm.mongodb.username</literal> username to
                    use when the MongoDB server requires authentication.
                    There is no default value.</para>
            </listitem>

            <listitem>
                <para><literal>hibernate.ogm.mongodb.password</literal> password to
                    use when the MongoDB server requires authentication. Is ignored if
                    <literal>username</literal> isn't specified.
                    There is no default value.</para>
            </listitem>

            <listitem>
                <para><literal>hibernate.ogm.mongodb.safe</literal> defines the safe
                    mode of the MongoDB driver (<literal>true</literal> or
                    <literal>false</literal>). When set to <literal>false</literal>, the
                    driver does not wait for the write operation to be applied before
                    returning. This could lead to loss of writes. By default
                    <literal>hibernate.ogm.mongodb.safe</literal> is set it to
                    <literal>true</literal> which means the driver will wait for the
                    operation to succeed before returning. Note that this is slower than
                    the unsafe mode.</para>
            </listitem>

            <listitem>
                <para>
                    <literal>hibernate.ogm.mongodb.connection_timeout</literal>
                    defines the timeout used by the driver when the connection to
                    the MongoDB instance is made. This configuration is expressed in milliseconds and
                    its default value is <literal>5000</literal>.
                </para>
            </listitem>
        </itemizedlist>

        <note>
            <para>The general policy in Hibernate OGM tis to not go against the
                underlying NoSQL store. We have made an exception for MongoDB's write
                concern default setting - which is unsafe out of the box. Based on the
                typical use case of Hibernate OGM (domain models) and based on the
                production feedback we have received, we do consider MongoDB's default
                value to be dangerous.</para>
        </note>
    </section>
</section>